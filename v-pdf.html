<!DOCTYPE html>
<html>

<head>
  <link rel="shortcut icon" href="images/KPK_Logo.svg">
  <title>View PDF</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- AJAX -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
  <!-- Costume CSS -->
  <link rel="stylesheet" type="text/css" href="css/flipbook.style.css">
  <link rel="stylesheet" type="text/css" href="css/font-awesome.css">
  <link rel="stylesheet" type="text/css" href="css/footer.css">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

  <!-- Include JS -->
  <script src="js/flipbook.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      $.getJSON("pdfData.json", function(data) {
        var totalPages = Math.ceil(data.length / 21);
        var currentPage = 1;

        function showPage(page) {
          var start = (page - 1) * 21;
          var end = start + 21;
          var pdfSections = data.slice(start, end);

          $(".row").empty(); // Clear existing PDF sections

          $.each(pdfSections, function(index, item) {
            var pdfId = "read" + (index + 1);
            var pdfSection = '<div class="col-md-4 mb-3">' +
              '<div class="card">' +
              '<div class="card-body">' +
              '<h3 id="title' + (index + 1) + '">' + item.title + '</h3>' +
              '<div class="button">' +
              '<a id="' + pdfId + '" class="btn btn-primary mt-2 mr-2 text-white">View File <i class="fas fa-book-reader fa-lg"></i></a>' +
              '<a href="' + item.pdfUrl + '" class="btn btn-primary mt-2 text-white" download>Download File <i class="fas fa-download fa-lg"></i></a>' +
              '</div>' +
              '</div>' +
              '</div>' +
              '</div>';

            $(".row").append(pdfSection);

            $("#" + pdfId).flipBook({
              //Layout Setting
              pdfUrl: item.pdfUrl,
              lightBox: true,
              layout: 3,
              currentPage: {
                vAlign: "bottom",
                hAlign: "left"
              },
              // BTN SETTING
              btnShare: {
                enabled: false
              },
              btnPrint: {
                hideOnMobile: true
              },
              btnDownloadPages: {
                enabled: true,
                title: "Download pages",
                icon: "fa-download",
                icon2: "file_download",
                url: "images/pdf.rar",
                name: "allPages.zip",
                hideOnMobile: false
              },
              btnColor: 'rgb(255,120,60)',
              sideBtnColor: 'rgb(255,120,60)',
              sideBtnSize: 60,
              sideBtnBackground: "rgba(0,0,0,.7)",
              sideBtnRadius: 60,
              btnSound: {
                vAlign: "top",
                hAlign: "left"
              },
              btnAutoplay: {
                vAlign: "top",
                hAlign: "left"
              },
            });
          });

          // Scroll to top of the page
          window.scrollTo(0, 0);
        }

        showPage(currentPage);

        function updatePaginationButtons() {
          $("#pageNumbers").text("Page " + currentPage + " of " + totalPages);
          if (currentPage === 1) {
            $("#previousPageBtn").hide();
          } else {
            $("#previousPageBtn").show();
          }
          if (currentPage === totalPages) {
            $("#nextPageBtn").hide();
          } else {
            $("#nextPageBtn").show();
          }
        }

        $("#previousPageBtn").click(function() {
          if (currentPage > 1) {
            currentPage--;
            showPage(currentPage);
            updatePaginationButtons();
          }
        });

        $("#nextPageBtn").click(function() {
          if (currentPage < totalPages) {
            currentPage++;
            showPage(currentPage);
            updatePaginationButtons();
          }
        });

        // Check if page number is stored in localStorage
        if (localStorage.getItem("currentPage")) {
          currentPage = parseInt(localStorage.getItem("currentPage"));
          showPage(currentPage);
        }
        updatePaginationButtons();

        // Save current page to localStorage on page unload
        $(window).on("beforeunload", function() {
          localStorage.setItem("currentPage", currentPage.toString());
        });
      });
    });
  </script>

  <style>
    body {
      background-color: #f6f6f6;
    }

    #size {
      font-size: 15px;
      color: #819196;
    }

    .pagination-container {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 20px;
    }

    .pagination-button {
      display: inline-block;
      padding: 8px 16px;
      border: 1px solid #ccc;
      background-color: #fff;
      cursor: pointer;
    }

    .pagination-button:hover {
      background-color: #f2f2f2;
    }

    #pageNumbers {
      cursor: default;
    }
  </style>
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top shadow-sm">
    <a class="navbar-brand" href="index.html">
    </a>
  </nav>
  <!-- End Of Navbar -->
  <br><br><br><br><br>
  <!-- PDF INFORMATION -->
  <section class="info" id="info">
    <div class="container">
      <div class="card shadow">
        <div class="row">
          <!-- Add more PDF sections as needed -->
        </div>
      </div>
    </div>
    <div class="pagination-container">
      <div id="previousPageBtn" class="pagination-button">&laquo; Previous</div>
      <div id="pageNumbers" class="pagination-text"></div>
      <div id="nextPageBtn" class="pagination-button">Next &raquo;</div>
    </div>
  </section>
  <!-- END OF PDF INFORMATION -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
</body>

</html>
